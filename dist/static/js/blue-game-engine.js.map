{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 316cbc4c6777f23fcb95","webpack:///./src/util/index.js","webpack:///./src/core/engine/index.js","webpack:///./src/core/engine/res/index.js","webpack:///./src/core/base/index.js","webpack:///./src/core/engine/role/index.js","webpack:///./src/core/index.js","webpack:///./src/core/webpack-hot.js","webpack:///./src/core/instance/index.js","webpack:///./src/util/dom.js","webpack:///./src/core/storage/index.js","webpack:///./src/core/instance/methods.js","webpack:///./src/core/instance/init.js","webpack:///./src/core/engine/map/index.js","webpack:///./src/core/engine/map/methods.js","webpack:///./src/core/engine/res/methods.js","webpack:///./src/core/engine/skill/index.js","webpack:///./src/core/engine/skill/methods.js","webpack:///./src/core/engine/role/methods.js","webpack:///./src/core/engine/role/monster/index.js","webpack:///./src/core/engine/role/monster/methods.js","webpack:///./src/core/engine/npc/index.js","webpack:///./src/core/engine/npc/methods.js","webpack:///./src/core/engine/task/index.js","webpack:///./src/core/engine/task/methods.js","webpack:///./src/core/engine/res/equipment/index.js","webpack:///./src/core/engine/res/equipment/methods.js","webpack:///./src/core/engine/res/consumable/index.js","webpack:///./src/core/engine/res/consumable/methods.js","webpack:///./src/core/engine/res/strengthen/index.js","webpack:///./src/core/engine/res/strengthen/methods.js"],"names":["Util","val","JSON","stringify","toString","Array","isPlainObject","isArray","undefined","trim","length","bool","context","callback","args","apply","obj","cb","isReturn","isUndef","i","index","newVal","len","push","hasOwnProperty","key","Object","defineProperty","configurable","enumerable","value","_obj","deepCopy","object","_object","oldObjKeys","each","findIndexInOld","indexOf","splice","extend","util","expr","tm","tmItem","replace","RegExp","Engine","uid","Res","opts","$options","getConfig","init","call","$map","id","Base","constructor","name","property","Role","game","$game","allRes","getRes","roleRes","res","lists","_res","type","findSameRes","split","isGetCount","cheakcBinding","skillId","allSkills","getSkills","skill","level","skills","skillUid","allTasks","getTasks","tasks","task","taskId","monsterId","monsters","monster","count","updateTaskStatus","receiveTask","gameResources","hooks","roleTasks","status","cancelTask","reward","removeRoleTaskRes","result","updateReward","exp","currency","submitTask","updateRoleProperty","equipment","hasResSpace","roleEquipments","equipments","inBodyEquipment","classify","nullPlainObject","disboard","isEquip","updateResSpace","equip","isCounterattack","isAdequateSkillConsume","useSkill","use","useConsumable","consumable","amount","buy","strengthen","enemy","isDie","Monster","current","fight","isMonster","enemyHarm","proportion","attributes","hp","wasting","total","clearFight","BlueGame","Map","Npc","Skill","Equipment","Consumable","Strengthen","Task","webpackHot","hot","module","accept","isInstance","gameInstance","mapId","updateCurrentMap","updateCurrentNpcs","my","role","maps","goMap","map","getMaps","allMaps","npcId","allNpcs","npcs","resId","allMonsters","vueInstance","$vm","allRoles","gameRes","rules","upgrade","ruleRes","rule","local","prototype","session","initRes","filterTaskHasEquipment","initSkillsGain","initStrengthen","initMy","Dom","el","outerHTML","document","querySelector","tag","createElement","text","createTextNode","comment","createComment","textContent","parent","exEl","insertBefore","nextSibling","parentNode","remove","setAttribute","removeAttribute","Storage","storage","getItem","setItem","removeItem","clear","window","localStorage","config","roles","die","levelUp","hurt","attackIntrinsic","effect","defenseIntrinsic","Math","floor","random","inlay","notResSpace","Vue","currentMap","getNpcs","newTaskRes","details","gotRes","hasGain","gain","findLevelInStrengthen","isStrengthen","strengthenSort","keys","sort","j","parseInt","mapUid","npcUid","getMonsters","monsterUid","description","players","price","capacity","isBinding","time","timer","mp","physicalAttack","physicalDefense","magicAttack","magicDefense","consume","occupation","intrinsic","_intrinsic","gains","head","body","hand","foot","weapon","space","max","resetRoleProperty","attr","gainItem","round","updateDieStatus","updateTaskMonster","updateTaskRes","roleTask","roleTaskRes","roleTaskMonsters","currentTask","resStatus","monsterStatus","findRoleRes","getTaskResCount","getTaskMonstersCount","updateNpcsTasksStatus","npc","npcTasks","resetTaskStatus","taskStatus","hasTask","hasUnfinishedTask","hasResultTask","taskDetails","taskCount","set","taskRes","resRemove","goodsPrice","parseFloat","toFixed","resCapacity","updateRewardRes","currentRes","getRandomId","updateEquipment","_count","checkBinding","findRes","forEach","Date","randomNumber","getTime","roleAllRes","skillHp","skillMp","advanceProperty","findGain","recover","updateLevel","deductSkillConsume","roleAttributes","skillStatus","attackName","PHYSICAL_ATTACK_NAME","MAGIC_ATTACK_NAME","skillAttributes","setGain","attack","enemyAttributes","rolePhysicalAttack","roleSpellAttack","enemyPhysicalDefense","enemySpellDefense","defense","enemyHp","monstersHook","roleHook","currentRole","roleExp","diffExp","updateLevelUpExp","updateCurrency","consumableAttributes","gainAttributes","findIndex","clearTimeout","newGain","setTimeout","bind","strengthenRes","findStrengthenRes","_strengthenRes","quantity","tasked","_tasks","prevTask","prevTasks","resUid","taskMonsters","notReceivedTask","unfinishedTask","resultTask","quality","_property","hasUse"],"mappings":"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","file":"js/blue-game-engine.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"BlueGame\"] = factory();\n\telse\n\t\troot[\"BlueGame\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./static\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 316cbc4c6777f23fcb95","import Dom from './dom';\r\n\r\nclass Util extends Dom {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  nullPlainObject(val){\r\n    return JSON.stringify(val) === \"{}\";\r\n  }\r\n\r\n  isStr(val) {\r\n    return typeof val === 'string';\r\n  }\r\n\r\n  isPlainObject(val) {\r\n    return val && val !== null && (val.toString() === '[object Object]');\r\n  }\r\n\r\n  isArray(val) {\r\n    return val instanceof Array;\r\n  }\r\n\r\n  isObjcet(val) {\r\n    return this.isPlainObject(val) || this.isArray(val);\r\n  }\r\n\r\n  isDef(val) {\r\n    return val !== undefined && val !== null;\r\n  }\r\n\r\n  isUndef(val) {\r\n    return val === undefined || val === null;\r\n  }\r\n\r\n  isBlankSpace(val) {\r\n    return val.trim().length === 0;\r\n  }\r\n\r\n  isTrue(bool) {\r\n    return bool === true;\r\n  }\r\n\r\n  isFalse(bool) {\r\n    return bool === false;\r\n  }\r\n\r\n  run(context, callback = function () {\r\n  }, args = []) {\r\n    callback.apply(context, args);\r\n  }\r\n\r\n  each(obj, cb, isReturn = false) {\r\n    if (this.isUndef(obj)) return;\r\n    let i = 0,\r\n      index = 0,\r\n      newVal = [];\r\n\r\n    const len = obj.length;\r\n\r\n    if (this.isArray(obj)) {\r\n      for (; i < len; i++) {\r\n        if (isReturn) {\r\n          newVal.push(cb(obj[i], i));\r\n        } else {\r\n          cb(obj[i], i);\r\n        }\r\n      }\r\n    } else {\r\n      for (i in obj) {\r\n        if (!obj.hasOwnProperty(i)) continue;\r\n        if (isReturn) {\r\n          newVal.push(cb(obj[i], i, index++));\r\n        } else {\r\n          cb(obj[i], i, index++);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (isReturn) return newVal;\r\n  }\r\n\r\n  definePropertyVal(obj, key, val) {\r\n    Object.defineProperty(obj, key, {\r\n      configurable: false,\r\n      enumerable: false,\r\n      value: val\r\n    });\r\n  }\r\n\r\n  deepCopy(obj) {\r\n    if (!obj || !(obj instanceof Array) && !(obj.toString() === \"[object Object]\")) return obj;\r\n    const _obj = obj instanceof Array ? [] : {};\r\n    for (let key in obj) {\r\n      if (!obj.hasOwnProperty(key)) continue;\r\n      if ((obj instanceof Array) || (obj instanceof Object)) {\r\n        _obj[key] = this.deepCopy(obj[key]);\r\n      } else {\r\n        _obj[key] = obj[key];\r\n      }\r\n    }\r\n    return _obj;\r\n  }\r\n\r\n  extend(object, _object) {\r\n\r\n    object = this.deepCopy(object);\r\n\r\n    const oldObjKeys = this.each(object, (obj, key) => {\r\n      return key;\r\n    }, true);\r\n\r\n    this.each(_object, (obj, key) => {\r\n\r\n      const findIndexInOld = oldObjKeys.indexOf(key);\r\n      if (findIndexInOld != -1) {\r\n        oldObjKeys.splice(findIndexInOld, 1);\r\n      }\r\n\r\n      if (this.isPlainObject(obj)) {\r\n        if (!object[key]) {\r\n          object[key] = {};\r\n        }\r\n        this.extend(object[key], obj);\r\n      }\r\n      object[key] = obj;\r\n    });\r\n\r\n    this.each(oldObjKeys, (key) => {\r\n      _object[key] = object[key];\r\n    });\r\n\r\n    return object;\r\n  }\r\n\r\n  //把当前key-value复制到对应对象的key-value上\r\n  copy(object, _object) {\r\n    util.each(_object, (obj, key) => {\r\n      object[key] = obj;\r\n    });\r\n  }\r\n\r\n  //获取表达式\r\n  getRegExp(expr) {\r\n    const tm = '\\\\/*.?+$^[](){}|\\'\\\"';\r\n    this.each(tm, (tmItem, index) => {\r\n      expr = expr.replace(new RegExp('\\\\' + tmItem, 'g'), '\\\\' + tmItem);\r\n    });\r\n    return expr;\r\n  }\r\n\r\n  getObjLen(obj) {\r\n    let index = 0;\r\n    this.each(obj,()=>{\r\n      ++index;\r\n    });\r\n    return index;\r\n  }\r\n}\r\n\r\nconst util = new Util();\r\n\r\n\r\nexport default util;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/index.js","import Base from '../base';\r\n\r\nclass Engine extends Base{\r\n  constructor(){\r\n    super();\r\n  }\r\n}\r\n\r\nexport default Engine;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/index.js","/*\r\n* 物资类\r\n* */\r\nimport { getConfig } from './methods';\r\nimport util from '@util';\r\nimport Engine from '../index';\r\n\r\nlet uid = 1;\r\n\r\nclass Res extends Engine {\r\n  constructor(opts = {}) {\r\n    super();\r\n    this.$options = util.extend(getConfig(), opts);\r\n    init.call(this);\r\n  }\r\n}\r\n\r\nfunction init() {\r\n  this.$map(this, this.$options);\r\n  this.id = (this.id || uid++);\r\n  delete this.$options;\r\n}\r\n\r\nexport default Res;\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/res/index.js","class Base {\r\n  $property(constructor, name, property) {\r\n    constructor[name] = property;\r\n  }\r\n\r\n  $map(object, _object) {\r\n    for (let key in _object) {\r\n      if (!_object.hasOwnProperty(key)) continue;\r\n      object[key] = _object[key];\r\n    }\r\n  }\r\n};\r\n\r\nexport default Base;\n\n\n// WEBPACK FOOTER //\n// ./src/core/base/index.js","/*\r\n* npc类\r\n* */\r\n\r\nimport util from '@util';\r\nimport Engine from '../index';\r\nimport {\r\n  getConfig,\r\n  updateRoleProperty,\r\n  updateTaskStatus,\r\n  receiveTask,\r\n  updateReward,\r\n  updateResSpace,\r\n  removeRoleTaskRes,\r\n  isAdequateSkillConsume,\r\n  findSameRes,\r\n  buy,\r\n  useSkill,\r\n  hasResSpace,\r\n  useConsumable,\r\n  strengthen\r\n} from './methods';\r\n\r\nclass Role extends Engine {\r\n  constructor(opts = {}) {\r\n    super();\r\n    this.$options = util.extend(getConfig(), opts);\r\n    init.call(this);\r\n  }\r\n\r\n  //获取资源\r\n  getRes(id) {\r\n\r\n    const game = this.$game,\r\n      allRes = game.getRes(),\r\n      roleRes = this.res.lists;\r\n\r\n    /* 根据具体的id查询自身的资源 */\r\n    if (id) {\r\n      for (let i = 0; i < roleRes.length; i++) {\r\n\r\n        const res = roleRes[i],\r\n          _res = allRes[id];\r\n\r\n        //是需要查询的资源\r\n        if (!(res.id === id)) continue;\r\n\r\n        //装备直接返回背包的属性\r\n        if (res.type === 2) {\r\n          return {\r\n            res,\r\n            roleRes: res\r\n          };\r\n        } else {\r\n          //资源则返回物品类\r\n          return {\r\n            res: _res,\r\n            roleRes: this.findSameRes(res)\r\n          };\r\n        }\r\n      }\r\n\r\n      return {\r\n        res: null,\r\n        roleRes: {}\r\n      };\r\n    }\r\n\r\n    return util.each(roleRes, (_res, i) => {\r\n\r\n      let id = _res.id.toString().split('-')[0];\r\n\r\n      const res = allRes[id];\r\n\r\n      if (res.type === 2) {\r\n        return this.getRes(_res.id);\r\n      } else {\r\n        return {\r\n          res,\r\n          roleRes: _res     //用户具体的数据 {id:1,count:1}\r\n        };\r\n      }\r\n    }, true);\r\n  }\r\n\r\n  findSameRes(res, isGetCount, cheakcBinding) {\r\n    return findSameRes.apply(this, [res, isGetCount, cheakcBinding]);\r\n  }\r\n\r\n  //获取玩家的技能\r\n  getSkills(skillId) {\r\n    const allSkills = this.$game.getSkills();\r\n    if (skillId) {\r\n      const skill = allSkills[skillId];\r\n      if (skill && skill.level <= this.property.level) {\r\n        return skill;\r\n      }\r\n      return {};\r\n    }\r\n    const skills = [];\r\n    util.each(this.skills, (skillUid) => {\r\n      const skill = allSkills[skillUid];\r\n      if (!skill || skill.level > this.property.level) return;\r\n      skills.push(skill);\r\n    });\r\n    return skills;\r\n  }\r\n\r\n  //获取任务当前的任务\r\n  getTasks() {\r\n    const allTasks = this.$game.getTasks();\r\n    return util.each(this.tasks.lists, (task, taskId) => {\r\n      return allTasks[taskId];\r\n    }, true);\r\n  }\r\n\r\n  //获取指定任务中怪物的数量\r\n  getTaskMonstersCount(id, monsterId) {\r\n    const task = this.tasks.lists[id];\r\n    if (!task) return 0;\r\n    const monsters = task.monsters;\r\n    for (let i = 0; i < monsters.length; i++) {\r\n      const monster = monsters[i];\r\n      if (monsterId == monster.id) {\r\n        return monster.count;\r\n      }\r\n    }\r\n  }\r\n\r\n  //更新角色当前的任务状态，击杀怪物后（获得物品），获取资源调用更新\r\n  updateTaskStatus(opts = { monsterId: 0 }) {\r\n    updateTaskStatus.call(this, opts);\r\n  }\r\n\r\n  //接受任务\r\n  receiveTask(task) {\r\n    const game = this.$game;\r\n    receiveTask.call(this, task);\r\n    //@hooks submitTask\r\n    game.gameResources.tasks.hooks.receiveTask.call(game, { task });\r\n    return this;\r\n  }\r\n\r\n  //取消任务\r\n  cancelTask(task) {\r\n    const roleTasks = this.tasks.lists,\r\n      game = this.$game;\r\n    if (!roleTasks[task.id]) return false;\r\n    delete roleTasks[task.id];\r\n    task.status = 0;\r\n    this.updateTaskStatus();\r\n    //@hooks submitTask\r\n    game.gameResources.tasks.hooks.cancelTask.call(game, { task });\r\n  }\r\n\r\n  //提交任务\r\n  submitTask(task) {\r\n    if (!(task.status === 2)) return false;\r\n    const reward = task.reward,\r\n      game = this.$game;\r\n    task.status = 3;\r\n    removeRoleTaskRes.call(this, task);\r\n    this.tasks.result.push(task.id);\r\n    delete this.tasks.lists[task.id];\r\n    updateReward.apply(this, [reward.exp, reward.currency, reward.res]);\r\n    this.updateTaskStatus();\r\n\r\n    //@hooks submitTask\r\n    game.gameResources.tasks.hooks.submitTask.call(game, { task });\r\n  }\r\n\r\n  //更新玩家的属性特性\r\n  updateRoleProperty() {\r\n    updateRoleProperty.call(this);\r\n  }\r\n\r\n  //穿上装备\r\n  equip(equipment) {\r\n\r\n    /* 没有背包空间 */\r\n    if (!hasResSpace.call(this)) {\r\n      return false;\r\n    }\r\n\r\n    const roleRes = this.res.lists,\r\n      game = this.$game,\r\n      roleEquipments = this.equipments,\r\n      inBodyEquipment = roleEquipments[equipment.classify];\r\n\r\n    //假的装备吧?\r\n    if (!equipment.classify && equipment.type !== 2) return false;\r\n\r\n    //身上是否穿了衣服，脱下\r\n    if (!util.nullPlainObject(inBodyEquipment)) {\r\n      this.disboard(inBodyEquipment);\r\n    }\r\n\r\n    //穿到指定的位置上\r\n    roleEquipments[equipment.classify] = equipment;\r\n\r\n    //获取到装备在背包上具体的位置\r\n    const index = roleRes.indexOf(equipment);\r\n\r\n    //从背包中移除\r\n    roleRes.splice(index, 1);\r\n\r\n    //更新穿戴状态\r\n    equipment.isEquip = true;\r\n\r\n    this.updateRoleProperty();\r\n\r\n    this.updateResSpace();\r\n\r\n    //@hooks use res\r\n    game.gameResources.res.hooks.equip.call(game, { res: equipment });\r\n\r\n    return true;\r\n  }\r\n\r\n  //卸下装备\r\n  disboard(equipment) {\r\n    const game = this.$game;\r\n\r\n    /* 没有背包空间 */\r\n    if (!hasResSpace.call(this)) {\r\n      return false;\r\n    }\r\n\r\n    //清空装备状态\r\n    this.equipments[equipment.classify] = {};\r\n\r\n    /* 放回到背包 */\r\n    this.res.lists.push(equipment);\r\n\r\n    equipment.isEquip = false;\r\n\r\n    this.updateRoleProperty();\r\n\r\n    this.updateResSpace();\r\n\r\n    //@hooks use res\r\n    game.gameResources.res.hooks.disboard.call(game, { res: equipment });\r\n\r\n    return true;\r\n  }\r\n\r\n  //使用技能\r\n  skill(skill, isCounterattack = true) {\r\n    const game = skill.$game;\r\n    //检测是否够hp和mp的扣除\r\n    if (isAdequateSkillConsume.call(this, skill)) {\r\n      useSkill.apply(this, [skill, isCounterattack]);\r\n\r\n      this.updateRoleProperty();\r\n\r\n      //@hook skill\r\n      game.gameResources.skills.hooks.use.call(game, { skill })\r\n\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  //使用消耗品\r\n  consumable(roleRes) {\r\n    const game = this.$game;\r\n\r\n    let status = useConsumable.call(this, roleRes);\r\n\r\n    this.updateRoleProperty();\r\n\r\n    this.updateTaskStatus();\r\n\r\n    this.updateResSpace();\r\n\r\n    //@hooks use res\r\n    game.gameResources.res.hooks.consumable.call(game, { res: roleRes });\r\n\r\n    return status;\r\n  }\r\n\r\n  //更新背包空间\r\n  updateResSpace() {\r\n    updateResSpace.call(this);\r\n  }\r\n\r\n  //购买物品\r\n  buy(res, amount) {\r\n    if (!hasResSpace.call(this)) return false;\r\n\r\n    buy.apply(this, [res, amount]);\r\n\r\n    this.updateTaskStatus();\r\n\r\n    this.updateResSpace();\r\n\r\n    return true;\r\n  }\r\n\r\n  //丢弃物品\r\n  discard(res, amount) {\r\n    const roleRes = this.res.lists,\r\n      index = roleRes.indexOf(res);\r\n    if (res.type === 2) {\r\n      roleRes.splice(index, 1);\r\n    } else {\r\n      res.count -= amount;\r\n      if (res.count < 1) {\r\n        roleRes.splice(index, 1);\r\n      }\r\n    }\r\n    this.updateResSpace();\r\n  }\r\n\r\n  //强化装备\r\n  strengthen(equipment) {\r\n    return strengthen.call(this, equipment);\r\n  }\r\n\r\n  //进入战斗场景\r\n  fight(enemy) {\r\n\r\n    //如果角色已经死亡了，不能再进行战斗了\r\n    if (this.isDie) return false;\r\n\r\n    const Engine = this.$game.constructor.Engine;\r\n\r\n    const { Monster } = Engine,\r\n      current = this.current,\r\n      fight = current.fight;\r\n\r\n    //攻击对象为怪物\r\n    if (enemy && enemy.isMonster) {\r\n\r\n      //设置自己击杀的对象\r\n      fight.enemy = new Monster(util.deepCopy(enemy));\r\n\r\n      fight.enemyHarm = 0;\r\n\r\n      //怪物的对手是自己\r\n      fight.enemy.current.fight.enemy = this;\r\n\r\n      fight.enemy.current.fight.enemyHarm = 0;\r\n\r\n      //更新一下怪物的属性\r\n      fight.enemy.updateRoleProperty();\r\n\r\n    } else if (enemy && !enemy.isMonster) {\r\n      //攻击对象为玩家\r\n      fight.enemy = enemy;\r\n      enemy.updateRoleProperty();\r\n    }\r\n  }\r\n\r\n  //清除战斗场景\r\n  clearFight() {\r\n    const fight = this.current.fight;\r\n    fight.enemy = null;\r\n    fight.enemyHarm = 0;\r\n  }\r\n\r\n  //恢复体力\r\n  //@proportion {Number} 0-1 恢复的比例\r\n  dieRecover(proportion) {\r\n    const attributes = this.property.attributes;\r\n    attributes.hp.wasting = -(attributes.hp.total * (1 - proportion));\r\n    this.updateRoleProperty();\r\n  }\r\n}\r\n\r\nfunction init() {\r\n\r\n  this.$map(this, this.$options);\r\n\r\n  delete this.$options;\r\n\r\n  this.updateRoleProperty();\r\n\r\n  this.updateResSpace();\r\n\r\n  this.clearFight();\r\n\r\n}\r\n\r\nexport default Role;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/role/index.js","import webpackHot from './webpack-hot';\r\n\r\n/*Game and ENGINE*/\r\nimport BlueGame from './instance';\r\nimport Engine from \"./engine\";\r\n\r\n/*game constructor*/\r\nimport Map from './engine/map';\r\nimport Res from './engine/res';\r\nimport Skill from './engine/skill';\r\nimport Role from './engine/role';\r\nimport Monster from './engine/role/monster';\r\nimport Npc from './engine/npc';\r\nimport Task from './engine/task';\r\nimport Equipment from './engine/res/equipment';\r\nimport Consumable from \"./engine/res/consumable\";\r\nimport Strengthen from \"./engine/res/strengthen\";\r\n\r\n/*GAME Static -> ENGINE*/\r\nBlueGame.Engine = Engine;\r\n\r\n/*ENGINE static methods class -> Map,Npc,Res,Skill,Role,Monster,Equipment,Consumable,Task*/\r\nEngine.Map = Map;\r\nEngine.Npc = Npc;\r\nEngine.Res = Res;\r\nEngine.Skill = Skill;\r\nEngine.Role = Role;\r\nEngine.Monster = Monster;\r\nEngine.Equipment = Equipment;\r\nEngine.Consumable = Consumable;\r\nEngine.Strengthen = Strengthen;\r\nEngine.Task = Task;\r\n\r\n/*webpack hot*/\r\nwebpackHot();\r\n\r\nexport default BlueGame;\n\n\n// WEBPACK FOOTER //\n// ./src/core/index.js","export default function hot() {\r\n  if (process.env == 'development' && process.dev) {\r\n    if (module.hot) {\r\n      module.hot.accept();\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/webpack-hot.js","//main\r\nimport util from '@util';\r\nimport Base from '../base';\r\nimport Storage from '../storage';\r\nimport {\r\n  getConfig,\r\n  updateCurrentMap,\r\n  updateCurrentNpcs\r\n} from './methods';\r\n\r\nimport {\r\n  initRes,\r\n  initMy,\r\n  initSkillsGain,\r\n  initStrengthen,\r\n  filterTaskHasEquipment\r\n} from './init';\r\n\r\nlet isInstance = false;\r\n\r\nlet gameInstance = null;\r\n\r\nclass BlueGame extends Base {\r\n  constructor(opts = {}) {\r\n    super();\r\n    if (this.constructor !== BlueGame) {\r\n      return new BlueGame(opts);\r\n    } else if (isInstance) {\r\n      return gameInstance;\r\n    }\r\n    isInstance = true;\r\n    gameInstance = this;\r\n    init.call(this, opts);\r\n  }\r\n\r\n  //go map\r\n  goMap(mapId) {\r\n\r\n    //update current map\r\n    updateCurrentMap.call(this, mapId);\r\n\r\n    //update current map has npcs\r\n    updateCurrentNpcs.call(this);\r\n\r\n    //update all tasks status\r\n    if (this.my.role) this.my.role.updateTaskStatus();\r\n\r\n    //@hooks go map\r\n    this.gameResources.maps.hooks.goMap.call(this, { map: this.getMaps()[mapId] });\r\n  }\r\n\r\n  //get id in map or all map\r\n  getMaps(mapId) {\r\n    const allMaps = this.gameResources.maps.lists;\r\n    if (mapId) {\r\n      return allMaps[mapId] || null;\r\n    }\r\n    return allMaps;\r\n  }\r\n\r\n  //get id in npc or all npcs\r\n  getNpcs(npcId) {\r\n    const allNpcs = this.gameResources.npcs.lists;\r\n    if (npcId) {\r\n      return allNpcs[allNpcs] || null;\r\n    }\r\n    return allNpcs;\r\n  }\r\n\r\n  //get id in res or all res\r\n  getRes(resId) {\r\n    const allRes = this.gameResources.res.lists;\r\n    if (resId) {\r\n      return allRes[resId] || null;\r\n    }\r\n    return allRes;\r\n  }\r\n\r\n  //get id in tasks or all tasks\r\n  getTasks(taskId) {\r\n    const allTasks = this.gameResources.tasks.lists;\r\n    if (taskId) {\r\n      return allTasks[taskId] || null;\r\n    }\r\n    return allTasks;\r\n  }\r\n\r\n  //get id in tasks or all tasks\r\n  getSkills(skillId) {\r\n    const allSkills = this.gameResources.skills.lists;\r\n    if (skillId) {\r\n      return allSkills[skillId] || null;\r\n    }\r\n    return allSkills;\r\n  }\r\n\r\n  //get game monster in id\r\n  getMonsters(monsterId) {\r\n    const allMonsters = this.gameResources.monsters.lists;\r\n    if (monsterId) {\r\n      return allMonsters[monsterId] || null;\r\n    }\r\n    return allMonsters;\r\n  }\r\n\r\n  //set vm in game\r\n  setVueInstance(vueInstance) {\r\n    this.$vm = vueInstance;\r\n  }\r\n\r\n  // add role in game.my.allRoles\r\n  addMyRole(role) {\r\n    this.my.allRoles.push(role);\r\n  }\r\n\r\n  //set current role\r\n  setCurrentRole(role) {\r\n    this.my.role = role;\r\n  }\r\n\r\n  //find equipment strengthen the res\r\n  findStrengthenRes(equipment) {\r\n    const strengthen = equipment.strengthen;\r\n    const gameRes = this.gameResources.res,\r\n      rules = gameRes.upgrade.strengthen.rules,\r\n      ruleRes = [];\r\n\r\n    for (let i = 0; i < rules.length; i++) {\r\n      const rule = rules[i];\r\n      if (rule.strengthen > strengthen) {\r\n        ruleRes.push(rule.res);\r\n      }\r\n    }\r\n    return ruleRes[ruleRes.length - 1] || [];\r\n  }\r\n}\r\n\r\n/*storage methods in Game*/\r\nBlueGame.local = BlueGame.prototype.local = new Storage({ type: 'local' });\r\n\r\nBlueGame.session = BlueGame.prototype.session = new Storage({ type: 'session' });\r\n\r\nfunction init(opts) {\r\n\r\n  //mount $game attribute in base prototype\r\n  Object.defineProperty(Base.prototype, '$game', {\r\n    enumerable: false,\r\n    value: this\r\n  });\r\n\r\n  this.$options = util.extend(getConfig(), opts);\r\n\r\n  //init engine res\r\n  initRes.call(this);\r\n\r\n  //filter task has equipment\r\n  filterTaskHasEquipment.call(this);\r\n\r\n  //init all skills has gain status\r\n  initSkillsGain.call(this);\r\n\r\n  //init strengthen res in game\r\n  initStrengthen.call(this);\r\n\r\n  //init role state\r\n  initMy.call(this);\r\n\r\n  delete this.$options;\r\n}\r\n\r\nexport default BlueGame;\n\n\n// WEBPACK FOOTER //\n// ./src/core/instance/index.js","export default class Dom {\r\n  outerHTML(el) {\r\n    return el.outerHTML;\r\n  }\r\n\r\n  getElm(el) {\r\n    return document.querySelector(el);\r\n  }\r\n\r\n  createElement(tag) {\r\n    return document.createElement(tag);\r\n  }\r\n\r\n  createTextNode(text) {\r\n    return document.createTextNode(text);\r\n  }\r\n\r\n  createComment(comment) {\r\n    return document.createComment(comment);\r\n  }\r\n\r\n  textContent(el, textContent) {\r\n    el.textContent = textContent;\r\n  }\r\n\r\n  insertBefore(parent, el, exEl) {\r\n    parent.insertBefore(el, exEl);\r\n  }\r\n\r\n  nextSibling(el){\r\n    return el.nextSibling;\r\n  }\r\n\r\n  parent(el) {\r\n    return (el && el.parentNode) || null;\r\n  }\r\n\r\n  remove(el) {\r\n    el.remove();\r\n  }\r\n\r\n  setAttribute(el, name, value) {\r\n    el.setAttribute(name, value);\r\n  }\r\n\r\n  removeAttribute(el, name) {\r\n    el.removeAttribute(name);\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/dom.js","/*\r\n* storage数据存储\r\n* */\r\n\r\nclass Storage {\r\n  constructor(opts) {\r\n    this.$options = opts;\r\n    init.call(this);\r\n  }\r\n\r\n  getItem(key) {\r\n    return this.storage.getItem(key);\r\n  }\r\n\r\n  setItem(key, val) {\r\n    this.storage.setItem(key, val);\r\n    return this;\r\n  }\r\n\r\n  removeItem(key) {\r\n    this.storage.removeItem(key);\r\n    return this;\r\n  }\r\n\r\n  key(key) {\r\n    return this.storage.key(key);\r\n  }\r\n\r\n  clear() {\r\n    this.storage.clear();\r\n  }\r\n\r\n}\r\n\r\nfunction init() {\r\n  const { type } = this.$options;\r\n  this.storage = window[`${type}Storage`] || localStorage;\r\n}\r\n\r\nexport default Storage;\n\n\n// WEBPACK FOOTER //\n// ./src/core/storage/index.js","/*\r\n* main methods\r\n* */\r\n\r\n//get game config\r\nexport function getConfig() {\r\n  return {\r\n    config: {},\r\n    current: {\r\n      map: null,\r\n      npcs: []\r\n    },\r\n    my: {     //当前选择的角色\r\n      role: null,\r\n      allRoles: [],\r\n      hooks: {}\r\n    },\r\n    gameResources: {\r\n      roles: {    //多个角色\r\n        lists: [],\r\n        hooks: {\r\n          //role is die\r\n          die(opts) {\r\n          },\r\n          //level up hooks\r\n          levelUp() {\r\n          }\r\n        }\r\n      },\r\n      monsters: {\r\n        lists: {},\r\n        hooks: {\r\n          //野怪被击杀\r\n          die(opts) {\r\n          }\r\n        }\r\n      },\r\n      maps: {\r\n        lists: {},\r\n        hooks: {\r\n          goMap(opts) {\r\n            //go map hooks\r\n          }\r\n        }\r\n      },\r\n      skills: {\r\n        lists: {},\r\n        hooks: {\r\n          //fight hurt\r\n          hurt(attackIntrinsic, effect, defenseIntrinsic) {\r\n            return Math.floor((attackIntrinsic + (attackIntrinsic * effect)) - ((Math.random() * 1) * defenseIntrinsic + defenseIntrinsic))\r\n          },\r\n          use(opts) {\r\n\r\n          }\r\n        }\r\n      },\r\n      npcs: {\r\n        lists: {},\r\n        hooks: {}\r\n      },\r\n      res: {\r\n        lists: {},\r\n        upgrade: {          //提升\r\n          strengthen: {     //强化装备\r\n            rules: []\r\n          },\r\n          inlay: {}         //镶嵌宝石\r\n        },\r\n        hooks: {\r\n          equip(opts) {\r\n          },\r\n          disboard(opts) {\r\n          },\r\n          consumable(opts) {\r\n          },\r\n          notResSpace(opts) {\r\n          }\r\n        }\r\n      },\r\n      tasks: {\r\n        lists: {},\r\n        hooks: {\r\n          receiveTask(opts) {\r\n          },\r\n          cancelTask(opts) {\r\n          },\r\n          submitTask(opts) {\r\n          }\r\n        }\r\n      }\r\n    },\r\n    Vue: null,    //Vue构造\r\n    $vm: null   //vue实例\r\n  }\r\n}\r\n\r\n//update role in map\r\nexport function updateCurrentMap(mapId) {\r\n  this.current.map = this.gameResources.maps.lists[mapId || 1];\r\n  if (this.my.role) {\r\n    this.my.role.current.map = mapId || 1;\r\n  }\r\n}\r\n\r\n//update map has npcs\r\nexport function updateCurrentNpcs() {\r\n  const current = this.current,\r\n    currentMap = current.map;\r\n  current.npcs = currentMap ? current.map.getNpcs() : [];\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/instance/methods.js","import util from '@util';\r\n\r\n//init game res\r\nexport function initRes() {\r\n  //base.prototype.$map\r\n  this.$map(this, this.$options);\r\n}\r\n\r\n//init task has res in task detail,del res type === 2 data\r\nexport function filterTaskHasEquipment() {\r\n  const opts = this.$options;\r\n  util.each(opts.gameResources.tasks.lists, (task) => {\r\n    const newTaskRes = [];\r\n    for (let i = 0; i < task.details.res.length; i++) {\r\n      const res = task.details.res[i];\r\n      const gotRes = this.getRes(res.id);\r\n      if (gotRes.type !== 2) {\r\n        newTaskRes.push(res);\r\n      }\r\n    }\r\n    task.details.res = newTaskRes;\r\n  });\r\n}\r\n\r\n//init my role data\r\nexport function initMy() {\r\n  const Role = this.constructor.Engine.Role,\r\n    opts = this.$options;\r\n  this.my.role = opts.my.role ? new Role(opts.my.role) : null;\r\n}\r\n\r\n//init skills has gain status\r\nexport function initSkillsGain() {\r\n  util.each(this.gameResources.skills.lists, (skill) => {\r\n    util.each(skill.property, (property) => {\r\n      if (skill.hasGain) return;\r\n      if (property.gain !== 0) {\r\n        skill.hasGain = true;\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\n//init strengthen res in game\r\nexport function initStrengthen() {\r\n  const allRes = this.getRes(),\r\n    findLevelInStrengthen = {},\r\n    rules = [],\r\n    strengthen = this.gameResources.res.upgrade.strengthen;\r\n\r\n  util.each(allRes, (res) => {\r\n    if (!res.isStrengthen) return;\r\n    const strengthen = res.strengthen;\r\n    if (!findLevelInStrengthen[strengthen]) {\r\n      findLevelInStrengthen[strengthen] = [];\r\n    }\r\n    findLevelInStrengthen[strengthen].push(res);\r\n  });\r\n\r\n  const strengthenSort = Object.keys(findLevelInStrengthen).sort((i, j) => {\r\n    return i > j;\r\n  });\r\n\r\n  util.each(strengthenSort, (strengthen) => {\r\n    const res = findLevelInStrengthen[strengthen];\r\n    rules.push({\r\n      strengthen: parseInt(strengthen),\r\n      res\r\n    });\r\n  });\r\n\r\n  strengthen.rules = rules;\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/instance/init.js","/*\r\n* 地图类\r\n* */\r\n\r\nimport { getConfig } from './methods';\r\nimport util from '@util';\r\nimport Engine from '../index';\r\n\r\nlet uid = 1;\r\n\r\nclass Map extends Engine {\r\n  constructor(opts = {}) {\r\n    super();\r\n    this.$options = util.extend(getConfig(), opts);\r\n    init.call(this);\r\n  }\r\n\r\n  //获取当前所有的地图\r\n  getMaps() {\r\n    const allMaps = this.$game.getMaps();\r\n    return util.each(this.maps, (mapUid) => {\r\n      return allMaps[mapUid];\r\n    }, true);\r\n  }\r\n\r\n  //获取当前的npc\r\n  getNpcs() {\r\n    const allNpcs = this.$game.getNpcs();\r\n    return util.each(this.npcs, (npcUid) => {\r\n      return allNpcs[npcUid];\r\n    }, true);\r\n  }\r\n\r\n  getMonsters() {\r\n    const allMonsters = this.$game.getMonsters();\r\n    return util.each(this.monsters, (monsterUid) => {\r\n      return allMonsters[monsterUid];\r\n    }, true);\r\n  }\r\n\r\n}\r\n\r\nfunction init() {\r\n  this.$map(this, this.$options);\r\n  this.id = (this.id || uid++);\r\n  delete this.$options;\r\n}\r\n\r\nexport default Map;\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/map/index.js","export function getConfig() {\r\n  return {\r\n    name: '',         //地图名称\r\n    description: '',  //地图描述\r\n    players: [],        //玩家,\r\n    npcs: [],           //地图npc\r\n    maps: [],         //分支地点\r\n    monsters: []      //分配的怪物\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/map/methods.js","/*\r\n* 物资方法\r\n* 物品类型 type {Number} 1:普通/材料类 2:装备 3:药品\r\n*\r\n* */\r\n\r\nexport function getConfig() {\r\n  return {\r\n    name: '',           //物品名字\r\n    description: '',    //物品描述\r\n    // isTrade: true,      //是否支持交易,暂时不做\r\n    type: 1,\r\n    price: 0,            //售价\r\n    capacity: 99,           //针对的背包中一个容量最大的限制数量\r\n    isBinding: false      //是否绑定\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/res/methods.js","/*\r\n* 技能 类\r\n* */\r\n\r\nimport util from '@util';\r\nimport { getConfig } from './methods';\r\nimport Engine from '../index';\r\n\r\nlet uid = 1;\r\n\r\nclass Skill extends Engine {\r\n  constructor(opts) {\r\n    super();\r\n    this.$options = util.extend(getConfig(), opts);\r\n    init.call(this);\r\n  }\r\n}\r\n\r\nfunction init() {\r\n  this.$map(this, this.$options);\r\n  this.id = (this.id || uid++);\r\n  delete this.$options;\r\n}\r\n\r\nexport default Skill;\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/skill/index.js","/*\r\n* npc方法\r\n* */\r\n\r\n/*\r\n* @property 技能的特性\r\n* */\r\nexport function getConfig() {\r\n  return {\r\n    name: '',\r\n    description: '',\r\n    level: 1,     //等级限制\r\n    hasGain: false,   //是否存在增益效果\r\n    property: {\r\n      hp: {\r\n        gain: 0,      //增益\r\n        effect: 0,    //效果\r\n        time: null,   //增益的有限时间\r\n        timer: null   //增益的定时器\r\n      },\r\n      mp: {\r\n        gain: 0,\r\n        effect: 0,\r\n        time: null,\r\n        timer: null\r\n      },\r\n      physicalAttack: {\r\n        gain: 0,\r\n        effect: 0,\r\n        time: null,\r\n        timer: null\r\n      },\r\n      physicalDefense: {\r\n        gain: 0,\r\n        time: null,\r\n        timer: null\r\n      },\r\n      magicAttack: {\r\n        gain: 0,\r\n        effect: 0,\r\n        time: null,\r\n        timer: null\r\n      },\r\n      magicDefense: {\r\n        gain: 0,\r\n        time: null,\r\n        timer: null\r\n      }\r\n    },\r\n    consume: {    //消耗\r\n      hp: 0,\r\n      mp: 0\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/skill/methods.js","/*\r\n* role methods\r\n* */\r\n\r\nimport util from '@util';\r\n\r\n//任务配置信息\r\nexport function getConfig() {\r\n  return {\r\n    id: 0,\r\n    name: '',                 //玩家名字\r\n    type: 0,                 //角色的类型\r\n    occupation: '',           //职业名，和角色类型挂钩的\r\n    /*---- 当前的场景 ----*/\r\n    current: {\r\n      /*---- 战斗场景 -----*/\r\n      fight: {\r\n        enemy: null,      //敌人\r\n        enemyHarm: 0     //敌人受到的伤害\r\n      },\r\n      map: null\r\n    },\r\n\r\n    /*---- 角色属性 -----*/\r\n    property: {\r\n\r\n      /*---- 经验 ----*/\r\n      exp: {\r\n        levelUp: 150,\r\n        current: 0\r\n      },\r\n\r\n      /*---- 玩家固有的 物理 法术 || 攻击 防御 ----*/\r\n      attributes: {\r\n\r\n        /*---- 血量 ----*/\r\n        hp: {\r\n          intrinsic: 120,       //原有的值\r\n          _intrinsic: 0,        //计算后的值\r\n          total: 0,              //总共\r\n          wasting: 0,            //消耗的\r\n          gains: []                //临时的效果\r\n        },\r\n\r\n        /*---- 魔法 ----*/\r\n        mp: {\r\n          intrinsic: 72,\r\n          _intrinsic: 0,\r\n          total: 0,\r\n          wasting: 0,\r\n          gains: []\r\n        },\r\n\r\n        physicalAttack: {\r\n          intrinsic: 30,\r\n          _intrinsic: 0,\r\n          gains: [],\r\n        },\r\n\r\n        physicalDefense: {\r\n          intrinsic: 15,\r\n          _intrinsic: 0,\r\n          gains: [],\r\n        },\r\n\r\n        magicAttack: {\r\n          intrinsic: 20,\r\n          _intrinsic: 0,\r\n          gains: [],\r\n        },\r\n\r\n        magicDefense: {\r\n          intrinsic: 20,\r\n          _intrinsic: 0,\r\n          gains: []\r\n        }\r\n      },\r\n\r\n      /*---- 资产 ----*/\r\n      currency: 0,\r\n\r\n      /*---- 等级 ----*/\r\n      level: 1\r\n    },\r\n\r\n    /*---- 玩家描述 ----*/\r\n    description: '',\r\n\r\n    /*---- 玩家装备 ----*/\r\n    equipments: {\r\n      head: {},\r\n      body: {},\r\n      hand: {},\r\n      foot: {},\r\n      weapon: {}\r\n    },\r\n\r\n    /*---- 技能 ----*/\r\n    skills: [],\r\n\r\n    /*---- 资源 ----*/\r\n    res: {\r\n      space: {\r\n        max: 30,\r\n        current: 0\r\n      },\r\n      lists: [\r\n        /*{\r\n         id:0,\r\n         count:12\r\n       }*/\r\n      ]\r\n    },\r\n\r\n    //对应任务的类型，是否需要收集物品，是否需要击杀指定数量的monster，\r\n    tasks: {\r\n      lists: {\r\n        /*0: {\r\n          type: 1,\r\n          monsters: [{id:1,count:1},{id:2,count:1}],\r\n          res: [{id:1,count:10}]\r\n        }*/\r\n      },\r\n      //已完成的任务列表\r\n      result: []\r\n    },\r\n\r\n    //是否死亡了\r\n    isDie: false\r\n  }\r\n}\r\n\r\n//----- Role -----//\r\n\r\n//重设玩家的初始值\r\nfunction resetRoleProperty(attributes) {\r\n  util.each(attributes, (attr) => {\r\n    attr._intrinsic = 0;\r\n    attr._intrinsic += attr.intrinsic;\r\n    //技能药物 增益\r\n    util.each(attr.gains, (gainItem) => {\r\n      attr._intrinsic += Math.round(attr._intrinsic * gainItem.gain);\r\n    });\r\n  });\r\n}\r\n\r\n//重新计算玩家所有的属性值\r\nexport function updateRoleProperty() {\r\n\r\n  const attributes = this.property.attributes;\r\n\r\n  //重设玩家的初始值\r\n  resetRoleProperty(attributes);\r\n\r\n  /*依赖装备属性计算*/\r\n  util.each(this.equipments, (equipment) => {\r\n    if (util.nullPlainObject(equipment)) return;\r\n    const property = equipment.property;\r\n    util.each(attributes, (attr, key) => {\r\n      attr._intrinsic += property[key]._intrinsic || 0;\r\n    });\r\n  });\r\n\r\n  //扣除伤害\r\n  util.each(attributes, (attr, key) => {\r\n    if (key === 'hp' || key === 'mp') {\r\n      attr.total = attr._intrinsic;\r\n      if (attr.total + attr.wasting < 0) {\r\n        attr.wasting = -attr.total;\r\n      }\r\n      attr._intrinsic += attr.wasting;\r\n    }\r\n  });\r\n\r\n  updateDieStatus.call(this);\r\n\r\n}\r\n\r\n//更新isDie状态\r\nfunction updateDieStatus() {\r\n  const hp = this.property.attributes.hp;\r\n  this.isDie = (hp.total + hp.wasting === 0);\r\n}\r\n\r\n//----- Role End -----//\r\n\r\n//----- Task -----//\r\n\r\n//更新任务monster累计\r\nfunction updateTaskMonster(opts) {\r\n  if (opts.monster) {\r\n    ++opts.monster.count;\r\n  }\r\n}\r\n\r\n//更新任务res累计\r\nfunction updateTaskRes(opts) {\r\n  if (opts.res) {\r\n    opts.res.count = opts.count;\r\n  }\r\n}\r\n\r\n//更新任务状态\r\nexport function updateTaskStatus(opts) {\r\n\r\n  //all tasks\r\n  const allTasks = this.$game.getTasks(),\r\n    //role tasks\r\n    roleTasks = this.tasks.lists;\r\n\r\n  //遍历用户任务\r\n  util.each(roleTasks, (roleTask, taskId) => {\r\n\r\n    const roleTaskRes = roleTask.res,         //查看当前任务res所需\r\n      roleTaskMonsters = roleTask.monsters,   //查看当前任务monster所需\r\n      currentTask = allTasks[taskId];         //当前任务列表中的任务\r\n\r\n    switch (currentTask.type) {\r\n      case 1:\r\n        //跑腿任务直接跳下一个任务状态\r\n        currentTask.status = 2;\r\n        break;\r\n      case 2:\r\n        //击杀 &| 收集任务\r\n        let resStatus = true,\r\n          monsterStatus = true;\r\n\r\n        //检查res是否符合任务要求\r\n        util.each(roleTaskRes, (res) => {\r\n\r\n          //这里的任务所需的资源id\r\n          const resId = res.id,\r\n            //从角色查找对应的id的物品详情\r\n            findRoleRes = findSameRes.apply(this, [res, true, false]);\r\n\r\n          /* 用户没有这个资源，直接跳出 */\r\n          if (findRoleRes.res.length === 0) {\r\n            resStatus = false;\r\n            return;\r\n          }\r\n\r\n          //更新任务中的资源数量\r\n          updateTaskRes.call(this, {\r\n            res,\r\n            count: findRoleRes.count\r\n          });\r\n\r\n          //用户资源 <= 任务资源\r\n          if (findRoleRes.count < currentTask.getTaskResCount(resId)) {\r\n            resStatus = false;\r\n          }\r\n\r\n        });\r\n\r\n        //检查monster是否符合任务要求\r\n        util.each(roleTaskMonsters, (monster) => {\r\n\r\n          const monsterId = monster.id;\r\n\r\n          //如果存在monster id 更新monster击杀数，往下将更新任务状态\r\n          if (opts.monsterId == monsterId &&\r\n            monster.count < currentTask.getTaskMonstersCount(monsterId)) {\r\n            updateTaskMonster.call(this, { monster });\r\n          }\r\n          //用户击杀 < 任务怪物击杀总数\r\n          if (monster.count < currentTask.getTaskMonstersCount(monsterId)) {\r\n            monsterStatus = false;\r\n          }\r\n        });\r\n\r\n        //改变当前任务状态\r\n        currentTask.status = (resStatus && monsterStatus) ? 2 : 1;\r\n        break;\r\n      default:\r\n        ;\r\n    }\r\n  });\r\n\r\n  //更新npc状态\r\n  updateNpcsTasksStatus.call(this);\r\n}\r\n\r\n//更新npc的任务状态\r\nfunction updateNpcsTasksStatus() {\r\n  const allNpcs = this.$game.getNpcs();\r\n\r\n  util.each(allNpcs, (npc) => {\r\n\r\n    const npcTasks = npc.getTasks();\r\n\r\n    //重新设置npc的r任务状态\r\n    npc.resetTaskStatus();\r\n\r\n    const taskStatus = npc.taskStatus;\r\n\r\n    util.each(npcTasks, (task) => {\r\n      //\"?\"存在未领取的任务，橙色\r\n      if (!taskStatus.hasTask\r\n        && task.status === 0) {\r\n        taskStatus.hasTask = true;\r\n      } else if (!taskStatus.hasUnfinishedTask\r\n        && task.status === 1) {\r\n        //\"?\"存在未完成的任务，灰色\r\n        taskStatus.hasUnfinishedTask = true;\r\n      } else if (!taskStatus.hasResultTask\r\n        && task.status === 2) {\r\n        //\"!\"存在完成未提交的任务任务，橙色\r\n        taskStatus.hasResultTask = true;\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\n//接受任务\r\nexport function receiveTask(task) {\r\n  const roleTasks = this.tasks.lists;\r\n  const Vue = this.$game.Vue;\r\n  if (roleTasks[task.id]) return false;\r\n  if (task.type === 1) {\r\n    roleTasks[task.id] = {};\r\n  } else if (task.type === 2) {\r\n\r\n    const taskDetails = task.details,\r\n      monsters = [],\r\n      res = [];\r\n\r\n    //初始化玩家任务怪物数据\r\n    util.each(taskDetails.monsters, (details) => {\r\n      monsters.push({\r\n        id: details.id,\r\n        count: 0,\r\n        taskCount: details.count\r\n      });\r\n    });\r\n\r\n    //初始化玩家任务资源数据\r\n    util.each(taskDetails.res, (details) => {\r\n      res.push({\r\n        id: details.id,\r\n        count: 0,\r\n        taskCount: details.count\r\n      });\r\n    });\r\n\r\n    const roleTask = {\r\n      monsters,\r\n      res\r\n    };\r\n\r\n    if (Vue) {\r\n      Vue.set(this.tasks.lists, task.id, roleTask);\r\n    } else {\r\n      roleTasks[task.id] = roleTask;\r\n    }\r\n  }\r\n\r\n  //更新任务状态\r\n  this.updateTaskStatus();\r\n}\r\n\r\n//任务依赖资源移除\r\nexport function removeRoleTaskRes(task) {\r\n  const taskRes = task.details.res;\r\n  util.each(taskRes, (res) => {\r\n    resRemove.apply(this, [res, res.count]);\r\n  });\r\n  this.updateResSpace();\r\n}\r\n\r\n//----- Task End -----//\r\n\r\n\r\n//----- Res -----//\r\n\r\n// role buy res\r\nexport function buy(res, amount) {\r\n\r\n  const game = this.$game,\r\n    allRes = game.getRes(),\r\n    property = this.property,\r\n    currency = property.currency,\r\n    goodsPrice = parseFloat((res.price * amount).toFixed());\r\n\r\n  if (currency < goodsPrice) return false;\r\n\r\n  //够钱买东西\r\n  property.currency -= goodsPrice;\r\n\r\n  resCapacity.apply(this, [res, amount, allRes[res.id].capacity]);\r\n\r\n}\r\n\r\n//是否有多余背包的空间\r\nexport function hasResSpace() {\r\n  const roleRes = this.res,\r\n    game = this.$game,\r\n    len = updateResSpace.call(this);  //顺便更新一下背包数量\r\n  if (len < roleRes.space.max) {\r\n    return true;\r\n  }\r\n  game.gameResources.res.hooks.notResSpace.call(game);\r\n  return false;\r\n}\r\n\r\n//更新用户的背包可用数\r\nexport function updateResSpace() {\r\n  const len = this.res.lists.length;\r\n  this.res.space.current = len;\r\n  return len;\r\n}\r\n\r\n//更新分配资源\r\nfunction updateRewardRes(res) {\r\n\r\n  /* 没有背包空间 */\r\n  if (!hasResSpace.call(this)) return false;\r\n\r\n  //游戏加载的资源\r\n  const game = this.$game,\r\n    allRes = game.getRes();\r\n\r\n  util.each(res, (_res) => {\r\n\r\n    //从自身去找对应的物品\r\n    const currentRes = allRes[_res.id];\r\n\r\n    //没有配置的资源直接跳出\r\n    if (!currentRes) return;\r\n\r\n    resCapacity.apply(this, [util.extend(currentRes, _res), _res.count, currentRes.capacity]);\r\n\r\n  });\r\n  this.updateResSpace();\r\n}\r\n\r\n//资源容量分配\r\nexport function resCapacity(res, count, capacity) {\r\n\r\n  const { Equipment } = game.constructor.Engine;\r\n\r\n  res = util.deepCopy(res);\r\n\r\n  if (res.type === 2) {\r\n    while (count--) {\r\n      res.id += `-${getRandomId()}`;\r\n      this.res.lists.push(Equipment.updateEquipment(res));\r\n    }\r\n  } else {\r\n\r\n    const getRes = findSameRes.call(this, res);\r\n\r\n    let _count = count;\r\n\r\n    for (let i = 0; i < getRes.length; i++) {\r\n      const _res = getRes[i];\r\n      if (_res.count === capacity) {\r\n        continue;\r\n      } else if (_res.count + _count > capacity) {\r\n        _count -= (capacity - _res.count);\r\n        _res.count = capacity;\r\n      } else {\r\n        _res.count += _count;\r\n        _count = 0;\r\n      }\r\n    }\r\n\r\n    if (_count > 0) {\r\n      this.res.lists.push({\r\n        id: res.id,\r\n        count: 0,\r\n        isBinding: res.isBinding\r\n      });\r\n      resCapacity.apply(this, [res, _count, capacity]);\r\n    }\r\n  }\r\n}\r\n\r\n//查找同一个物品在自身背包\r\nexport function findSameRes(res, isGetCount = false, checkBinding = true) {\r\n  const findRes = [];\r\n  let count = 0;\r\n  if (res.type === 2) return findRes;\r\n  this.res.lists.forEach((_res) => {\r\n    //检查id的同时，检查看是否为绑定的\r\n    if ((_res.id == res.id) && (checkBinding ? !!(_res.isBinding) == res.isBinding : true)) {\r\n      findRes.push(_res);\r\n      count += _res.count;\r\n    }\r\n  });\r\n  if (isGetCount) {\r\n    return {\r\n      res: findRes,\r\n      count\r\n    };\r\n  }\r\n  return findRes;\r\n}\r\n\r\n//获取随机的id,为了区分装备类查找的相同性\r\nfunction getRandomId() {\r\n  const time = new Date(),\r\n    randomNumber = (Math.random() * 1000).toFixed(0);\r\n  return `${time.getTime()}:${randomNumber}`;\r\n}\r\n\r\n//资源的移除\r\nexport function resRemove(res, count) {\r\n  const roleAllRes = this.res.lists;\r\n  const roleRes = this.findSameRes(res, false, false);\r\n  for (let i = 0; i < roleRes.length; i++) {\r\n    const _res = roleRes[i],\r\n      index = roleAllRes.indexOf(_res);\r\n    //如果当前的资源不够相抵，下一个资源抵扣\r\n    if (count - _res.count >= 0) {\r\n      roleAllRes.splice(index, 1);\r\n      count -= _res.count;\r\n    } else if (count - _res.count < 0) {\r\n      _res.count -= count;\r\n    }\r\n  }\r\n}\r\n\r\n//----- Res End -----//\r\n\r\n//----- Skill -----//\r\n\r\n//足够的技能消耗\r\n//@return {Boolean}\r\nexport function isAdequateSkillConsume(skill) {\r\n  const attributes = this.property.attributes,\r\n    { hp: skillHp, mp: skillMp } = skill.consume,\r\n    { hp, mp } = attributes;\r\n  if (hp._intrinsic - skillHp > 0 && mp._intrinsic - skillMp >= 0) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n//升级->提升特性\r\nfunction advanceProperty() {\r\n  const property = this.property,\r\n    attributes = property.attributes;\r\n\r\n  /* 特性的属性 */\r\n  util.each(attributes, (attr) => {\r\n    const intrinsic = attr.intrinsic;\r\n    attr.intrinsic = Math.round(intrinsic + (intrinsic * 0.2));\r\n  });\r\n}\r\n\r\n//查找增益效果\r\nfunction findGain(gains, type, id) {\r\n  let i = 0;\r\n  for (; i < gains.length; i++) {\r\n    const gain = gains[i];\r\n    if (gain.type === type && gain.id === id) {\r\n      return i;\r\n    }\r\n  }\r\n  return -1;\r\n}\r\n\r\n//hp || mp || exp 效果处理\r\nfunction recover(recover, effect, name) {\r\n  if (name === 'hp' || name === 'mp') {\r\n    if (recover.wasting === 0) return;\r\n    if ((effect += recover.wasting) > 0) {\r\n      recover.wasting = 0;\r\n    } else {\r\n      recover.wasting = effect;\r\n    }\r\n  } else if (name === 'exp') {\r\n    updateLevel.call(this, effect);\r\n  }\r\n  this.updateRoleProperty();\r\n}\r\n\r\n//使用技能\r\nexport function useSkill(skill, isCounterattack) {\r\n\r\n  //扣除技能的消耗\r\n  deductSkillConsume.call(this, skill);\r\n\r\n  const roleAttributes = this.property.attributes,\r\n    current = this.current,\r\n    fight = current.fight,\r\n    enemy = fight.enemy,\r\n    id = skill.id;\r\n\r\n  //敌方是否已经阵亡\r\n  if (enemy.isDie) return;\r\n\r\n  // 攻击的状态，只能攻击一次，\r\n  // 针对的是物理攻击还是魔法攻击的，\r\n  // 设定用户的技能的时候只能设置一个，\r\n  // 不然攻击可能是物理的，可能是魔法的\r\n  let skillStatus = true;\r\n\r\n  //check attack name\r\n  const attackName = (function () {\r\n    const PHYSICAL_ATTACK_NAME = 'physicalAttack',\r\n      MAGIC_ATTACK_NAME = 'magicAttack';\r\n    const magicAttack = skill.property[MAGIC_ATTACK_NAME];\r\n    if (magicAttack.effect !== 0) {\r\n      return MAGIC_ATTACK_NAME;\r\n    } else {\r\n      return PHYSICAL_ATTACK_NAME;\r\n    }\r\n  })();\r\n\r\n  //use skill\r\n  util.each(skill.property, (skillAttributes, name) => {\r\n\r\n    if (skillAttributes.gain !== 0) {\r\n      setGain(this, skillAttributes, roleAttributes, 'skill', name, id);\r\n    }\r\n\r\n    if ((name === 'hp' || name === 'mp') &&\r\n      skillAttributes.effect !== 0) {\r\n      recover.call(this, roleAttributes[name], skillAttributes.effect, name);\r\n    } else if ((name === attackName) && skillStatus) {\r\n      isCounterattack = attack(this, fight.enemy, skillAttributes.effect, name, isCounterattack);\r\n      skillStatus = false;\r\n    }\r\n\r\n  });\r\n\r\n  //enemy attack role\r\n  if (isCounterattack) {\r\n    enemy.skill(enemy.getSkills()[0], false);\r\n  }\r\n}\r\n\r\n//扣除技能的消耗\r\nfunction deductSkillConsume(skill) {\r\n  const attributes = this.property.attributes,\r\n    { hp: skillHp, mp: skillMp } = skill.consume,\r\n    { hp, mp } = attributes;\r\n  hp.wasting += -skillHp;\r\n  mp.wasting += -skillMp;\r\n}\r\n\r\n//攻击\r\nfunction attack(role, enemy, effect, name, isCounterattack) {\r\n  const roleAttributes = role.property.attributes,\r\n    enemyAttributes = enemy.property.attributes,\r\n    rolePhysicalAttack = roleAttributes.physicalAttack,\r\n    roleSpellAttack = roleAttributes.magicAttack,\r\n    enemyPhysicalDefense = enemyAttributes.physicalDefense,\r\n    enemySpellDefense = enemyAttributes.magicDefense;\r\n  if (name === 'physicalAttack') {\r\n    return hurt(role, enemy, effect, rolePhysicalAttack, enemyPhysicalDefense, isCounterattack);\r\n  } else if (name === 'magicAttack') {\r\n    return hurt(role, enemy, effect, roleSpellAttack, enemySpellDefense, isCounterattack);\r\n  }\r\n}\r\n\r\n//攻击伤害\r\nfunction hurt(role, enemy, effect, attack, defense, isCounterattack) {\r\n  const game = role.$game,\r\n    enemyAttributes = enemy.property.attributes,\r\n    enemyHp = enemyAttributes.hp,\r\n    attackIntrinsic = attack._intrinsic,\r\n    defenseIntrinsic = defense._intrinsic;\r\n\r\n  //@hooks fight hurt\r\n  //return hurt\r\n  let enemyHarm = game.gameResources.skills.hooks.hurt.apply(game, [attackIntrinsic, effect, defenseIntrinsic]);\r\n\r\n  //没有伤害，直接扣1血\r\n  if (enemyHarm < 0) {\r\n    enemyHarm = 1;\r\n  }\r\n\r\n  if (enemyHarm >= enemyHp._intrinsic) {\r\n    role.current.fight.enemyHarm = -(enemyHp.total + enemyHp.wasting);\r\n    enemyHp.wasting = -enemyHp.total;\r\n    die(role, enemy);\r\n    isCounterattack = false;\r\n  } else {\r\n    role.current.fight.enemyHarm = -enemyHarm;\r\n    enemyHp.wasting += -enemyHarm;\r\n  }\r\n\r\n  enemy.updateRoleProperty();\r\n\r\n  return isCounterattack;\r\n}\r\n\r\n//战斗阵亡\r\n//role 战斗中的攻击角色\r\n//enemy 敌对\r\nfunction die(role, enemy) {\r\n  const game = enemy.$game,\r\n    my = game.my,\r\n    monstersHook = game.gameResources.monsters.hooks,\r\n    roleHook = game.gameResources.roles.hooks,\r\n    currentRole = my.role;  //当前的玩家\r\n\r\n  //玩家被击杀了\r\n  if (currentRole === enemy) {\r\n    //角色被击杀钩子，（被杀，杀）\r\n    roleHook.die.call(game, {\r\n      role: currentRole,\r\n      enemy: role\r\n    });\r\n  } else if (enemy.isMonster) {\r\n    //野怪被击杀了,添加野怪奖励\r\n    updateReward.apply(currentRole, [\r\n      enemy.reward.exp,\r\n      enemy.reward.currency,\r\n      enemy.reward.res\r\n    ]);\r\n    currentRole.updateTaskStatus({\r\n      monsterId: enemy.id\r\n    });\r\n    //怪物被击杀钩子\r\n    monstersHook.die.call(game, {\r\n      enemy,\r\n      role: currentRole\r\n    });\r\n  } else {\r\n    /*这里是其他玩家被击杀*/\r\n  }\r\n}\r\n\r\n//----- Skill End -----//\r\n\r\n//----- Level -----//\r\n\r\n//更新等级\r\nfunction updateLevel(exp) {\r\n  while (exp) {\r\n    const property = this.property,\r\n      roleExp = property.exp,\r\n      diffExp = roleExp.levelUp - roleExp.current;\r\n    if (exp === diffExp || diffExp === 0) {\r\n      roleExp.current = exp = 0;\r\n      ++property.level;\r\n      updateLevelUpExp.call(this);\r\n    } else if (exp > diffExp) {\r\n      roleExp.current = 0;\r\n      exp -= diffExp;\r\n      ++property.level;\r\n      updateLevelUpExp.call(this);\r\n    } else if (exp < diffExp) {\r\n      roleExp.current += exp;\r\n      exp = 0;\r\n    }\r\n  }\r\n\r\n  //初始化玩家属性\r\n  this.updateRoleProperty();\r\n}\r\n\r\n//更新升级后所需的经验\r\nfunction updateLevelUpExp() {\r\n  const game = this.$game,\r\n    property = this.property,\r\n    { hp, mp } = property.attributes,\r\n    level = property.level;\r\n\r\n  //更新等级升级所需\r\n  property.exp.levelUp = level * level * 150;\r\n\r\n  //hp和mp消耗初始化\r\n  hp.wasting = mp.wasting = 0;\r\n\r\n  //@hooks level up\r\n  game.gameResources.roles.hooks.levelUp.apply(game);\r\n\r\n  //提升属性\r\n  advanceProperty.call(this);\r\n}\r\n\r\n//----- Level End -----//\r\n\r\n//更新奖励\r\nexport function updateReward(exp, currency, res) {\r\n  updateLevel.call(this, exp);\r\n  updateCurrency.call(this, currency);\r\n  updateRewardRes.call(this, res);\r\n}\r\n\r\n//更新分配金币\r\nfunction updateCurrency(currency) {\r\n  this.property.currency += currency;\r\n}\r\n\r\n//使用消耗品\r\nexport function useConsumable(roleRes) {\r\n  const game = this.$game,\r\n    roleAttributes = this.property.attributes,\r\n    id = roleRes.id,\r\n    index = this.res.lists.indexOf(roleRes),\r\n    consumable = game.getRes(id);\r\n\r\n  if (!roleRes) return false;\r\n  if (roleRes.count > 0) --roleRes.count;\r\n  if (roleRes.count === 0) this.res.lists.splice(index, 1);\r\n\r\n  //消耗品的增益 && 消耗品恢复值\r\n  util.each(consumable.property, (consumableAttributes, name) => {\r\n    if (consumableAttributes.gain !== 0 &&\r\n      consumableAttributes.time !== 0) {\r\n      setGain(this, consumableAttributes, roleAttributes, 'consumable', name, id);\r\n    }\r\n    if (consumableAttributes.effect != null) {\r\n      if ((name === 'hp' ||\r\n          name === 'mp' ||\r\n          name === 'exp')\r\n        && consumableAttributes.effect !== 0) {\r\n        recover.call(this, roleAttributes[name], consumableAttributes.effect, name);\r\n      }\r\n    }\r\n  });\r\n  return true;\r\n}\r\n\r\n//增益处理\r\nfunction setGain(my, gainAttributes, roleAttributes, type, name, id) {\r\n  //增益列表\r\n  const gains = roleAttributes[name].gains;\r\n  let findIndex;\r\n  if ((findIndex = findGain(gains, type, id)) !== -1) {\r\n\r\n    //药物增益延长时间\r\n    if (type === 'consumable') {\r\n      gains[findIndex].time += gainAttributes.time;\r\n      return;\r\n    }\r\n\r\n    //原来增益的定时器清除\r\n    clearTimeout(gains[findIndex].timer);\r\n\r\n    //移除增益\r\n    gains.splice(findIndex, 1);\r\n  }\r\n\r\n  let newGain = {\r\n    id,\r\n    name,\r\n    type: type,\r\n    gain: gainAttributes.gain,\r\n    time: gainAttributes.time,\r\n    timer: setTimeout(timer.bind(my), 1000)\r\n  };\r\n\r\n  function timer() {\r\n    if (--newGain.time > 0) {\r\n      newGain.timer = setTimeout(timer.bind(my), 1000);\r\n    } else {\r\n      clearTimeout(newGain.timer);\r\n      newGain = null;\r\n      //移除增益\r\n      gains.splice(findGain(gains, type, id), 1);\r\n      my.updateRoleProperty();\r\n    }\r\n  }\r\n\r\n  gains.push(newGain);\r\n  my.updateRoleProperty();\r\n}\r\n\r\n//强化装备\r\nexport function strengthen(equipment) {\r\n  const game = this.$game,\r\n    { Equipment } = game.constructor.Engine,\r\n    strengthenRes = game.findStrengthenRes(equipment); //找到所需的强化物品\r\n\r\n  for (let i = 0; i < strengthenRes.length; i++) {\r\n    const _strengthenRes = strengthenRes[i],\r\n      quantity = _strengthenRes.quantity,\r\n      findRes = this.findSameRes(_strengthenRes, true, false);\r\n    if (findRes.count < quantity) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  //移除强化所需物资\r\n  strengthenRes.forEach((res) => {\r\n    resRemove.call(this, res, res.quantity);\r\n  });\r\n\r\n  ++equipment.strengthen;\r\n\r\n  Equipment.updateEquipment(equipment);\r\n\r\n  return true;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/role/methods.js","/*\r\n* 怪物 类\r\n* */\r\nimport util from '@util';\r\nimport Role from '../index';\r\nimport { getConfig } from './methods';\r\n\r\nlet uid = 1;\r\n\r\nclass Monster extends Role {\r\n  constructor(opts = {}) {\r\n    super(util.extend(getConfig(), opts));\r\n    init.call(this);\r\n  }\r\n}\r\n\r\nfunction init() {\r\n\r\n  this.$map(this, this.$options);\r\n\r\n  this.id = (this.id || uid++);\r\n\r\n  delete this.$options;\r\n}\r\n\r\nexport default Monster;\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/role/monster/index.js","export function getConfig() {\r\n  return {\r\n    isMonster: true,\r\n    property: {\r\n      exp: false,\r\n      currency: false\r\n    },\r\n    reward: {           //奖励\r\n      exp: 0,           //完成后的经验\r\n      currency: 0,       //完成后的货币\r\n      res: [\r\n        /*{\r\n          id:1,\r\n          count:1\r\n        }*/\r\n      ]             //完成后的资源 uid{count:0} uid + 数量\r\n    },\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/role/monster/methods.js","/*\r\n* npc类\r\n* */\r\nimport { getConfig } from './methods';\r\nimport util from '@util';\r\nimport Engine from '../index';\r\n\r\nlet uid = 1;\r\n\r\nclass Npc extends Engine {\r\n\r\n  constructor(opts = {}) {\r\n    super();\r\n    this.$options = util.extend(getConfig(), opts);\r\n    init.call(this);\r\n  }\r\n\r\n  //获取当前任务（可领取 && 在进行）\r\n  getTasks() {\r\n    const game = this.$game,     //game 实例\r\n      tasks = game.getTasks(),         //所有的任务\r\n      my = game.my.role,\r\n      level = my.level,       //用户等级\r\n      tasked = my.tasks.result;    //获取当前用户\r\n\r\n    const _tasks = [];\r\n\r\n    util.each(this.tasks, (taskId) => {\r\n\r\n      const task = tasks[taskId],           //当前任务\r\n        prevTask = task.prevTasks;  //上一级关联任务\r\n\r\n      //做过的任务 && level不够\r\n      if (tasked.indexOf(taskId) !== -1 || task.level > level) return;\r\n\r\n      //从已完成的任务列表中查找任务依赖\r\n      //任务依赖中存在\r\n      if (prevTask) {\r\n        if (tasked.indexOf(prevTask) !== -1) {\r\n          _tasks.push(task);\r\n        }\r\n      } else {\r\n        _tasks.push(task);\r\n      }\r\n    });\r\n\r\n    return _tasks;\r\n  }\r\n\r\n  //获取资源\r\n  getRes() {\r\n    const allRes = this.$game.getRes();\r\n    return util.each(this.res, (resUid) => {\r\n      return allRes[resUid];\r\n    }, true);\r\n  }\r\n\r\n  //清除npc状态\r\n  resetTaskStatus() {\r\n    this.taskStatus = {\r\n      hasTask: false,           //存在未领取的任务\r\n      hasUnfinishedTask: false, //存在未完成的任务\r\n      hasResultTask: false      //存在完成的任务\r\n    };\r\n  }\r\n}\r\n\r\nfunction init() {\r\n  this.$map(this, this.$options);\r\n  this.id = (this.id || uid++);\r\n  delete this.$options;\r\n}\r\n\r\nexport default Npc;\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/npc/index.js","/*\r\n* npc方法\r\n* */\r\n\r\nexport function getConfig() {\r\n  return {\r\n    name: '',             //名字\r\n    description: '',      //npc描述\r\n    res: [],              //资源\r\n    tasks: [],            //任务\r\n    taskStatus: {          //任务状态\r\n      hasTask: false,           //存在未领取的任务\r\n      hasUnfinishedTask: false, //存在未完成的任务\r\n      hasResultTask: false      //存在完成的任务\r\n    },\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/npc/methods.js","/*\r\n* 装备类\r\n* */\r\nimport { getConfig } from './methods';\r\nimport util from '@util';\r\nimport Engine from '../index';\r\n\r\nlet uid = 1;\r\n\r\n//任务\r\nclass Task extends Engine {\r\n  constructor(opts = {}) {\r\n    super();\r\n    this.$options = util.extend(getConfig(), opts);\r\n    init.call(this);\r\n  }\r\n\r\n  //获取任务id中资源count\r\n  getTaskResCount(id) {\r\n    const taskRes = this.details.res;\r\n    for (var i = 0; i < taskRes.length; i++) {\r\n      const res = taskRes[i];\r\n      if (res.id == id) {\r\n        return res.count;\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  //获取任务id中击杀count\r\n  getTaskMonstersCount(id) {\r\n    const taskMonsters = this.details.monsters;\r\n    for (var i = 0; i < taskMonsters.length; i++) {\r\n      const monster = taskMonsters[i];\r\n      if (monster.id == id) {\r\n        return monster.count;\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  //获取任务资源\r\n  getRewardRes() {\r\n    const game = this.$game,\r\n      allRes = game.getRes();\r\n    return util.each(this.reward.res, (taskRes) => {\r\n      const id = taskRes.id,\r\n        res = allRes[id],\r\n        currentRes = util.deepCopy(res);\r\n\r\n      let _res = {};\r\n\r\n      //针对装备类直接扩展到原来的装备\r\n      if (res.type === 2) {\r\n        _res = {\r\n          res: util.extend(currentRes, taskRes),\r\n          count: 1\r\n        };\r\n      } else {\r\n        _res = {\r\n          res,\r\n          count: taskRes.count\r\n        };\r\n      }\r\n      return _res;\r\n    }, true);\r\n  }\r\n\r\n}\r\n\r\nfunction init() {\r\n  this.$map(this, this.$options);\r\n  this.id = (this.id || uid++);\r\n  delete this.$options;\r\n}\r\n\r\nexport default Task;\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/task/index.js","/*\r\n* 任务方法\r\n* */\r\n\r\n/*\r\n* 任务名  @name {String}\r\n* 任务描述  @description {String}\r\n* 任务归类  @classify {Number}  1:主线 2.支线 3.每日任务\r\n* 任务类型  @type {Number}  1:跑腿 2.击杀&|购买物品\r\n* 任务状态  @status {Number}  0:未领取 1:已领取未完成 2:完成，未提交 3：完成，提交\r\n* 任务状态  @level {Number}  等级限制\r\n* 任务奖励  @reward {Object}\r\n*    @exp {Number} 奖励经验\r\n*    @currency {Number} 奖励货币\r\n*    @res {Array}    奖励物资\r\n* */\r\n\r\nexport function getConfig() {\r\n  return {\r\n    name: '',           //任务名\r\n    classify: 1,        //任务归类\r\n    level: 1,           //等级限制\r\n    status: 0,          //任务状态，完成将会添加到用户已完成的列表中，\r\n\r\n    //任务状态描述内容\r\n    description: {\r\n      notReceivedTask: \"\",              //未领取任务描述\r\n      unfinishedTask: \"\",               //未完成的任务描述\r\n      resultTask: \"\"                    //完成任务后的描述\r\n    },\r\n\r\n    type: 1,                            //任务类型\r\n\r\n    details: {                          //任务细节\r\n      res: [\r\n        /*{\r\n          id:1,\r\n          count:10\r\n        }*/\r\n      ],                       //所需任务资源\r\n      monsters: [\r\n        /*{\r\n          id:1,\r\n          count:1\r\n        }*/\r\n      ]//所需任务击杀怪物\r\n    },\r\n    reward: {           //奖励\r\n      exp: 0,           //完成后的经验\r\n      currency: 0,       //完成后的货币\r\n      res: [\r\n        /*{\r\n          id:1,\r\n          count:1\r\n        }*/\r\n      ]             //完成后的资源 uid{count:0} uid + 数量\r\n    },\r\n    prevTasks: null        //上一个关联任务  currentTaskId : prevTaskId\r\n  };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/task/methods.js","/*\r\n* 装备类\r\n* */\r\nimport { getConfig, updateEquipment } from './methods';\r\nimport util from '@util';\r\nimport Res from '../index';\r\n\r\n//Equipment extends Res\r\nclass Equipment extends Res {\r\n  constructor(opts = {}) {\r\n    super(util.extend(getConfig(), opts));\r\n    init.call(this);\r\n  }\r\n\r\n  updateEquipment(){\r\n    return updateEquipment(this);\r\n  }\r\n}\r\n\r\nfunction init() {\r\n  this.$map(this, this.$options);\r\n  this.updateEquipment();\r\n  delete this.$options;\r\n}\r\n\r\nEquipment.updateEquipment = updateEquipment;\r\n\r\nexport default Equipment;\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/res/equipment/index.js","/*\r\n* 装备方法\r\n* */\r\n\r\nimport util from '@util';\r\n\r\n//get equipment config\r\nexport function getConfig() {\r\n  return {\r\n    classify: null,     //装备分类 head,hand,body,foot,weapon\r\n    type: 2,            //武器类型\r\n    quality: 1,         //品质\r\n    property: {\r\n      hp: {\r\n        intrinsic: 0,\r\n        _intrinsic: 0\r\n      },\r\n      mp: {\r\n        intrinsic: 0,\r\n        _intrinsic: 0\r\n      },\r\n      physicalAttack: {\r\n        intrinsic: 0,\r\n        _intrinsic: 0\r\n      },\r\n      physicalDefense: {\r\n        intrinsic: 0,\r\n        _intrinsic: 0\r\n      },\r\n      magicAttack: {\r\n        intrinsic: 0,\r\n        _intrinsic: 0\r\n      },\r\n      magicDefense: {\r\n        intrinsic: 0,\r\n        _intrinsic: 0\r\n      }\r\n    },\r\n    strengthen: 0,         //强化\r\n    count: 1,            //默认数量1(不建议修改)\r\n    isEquip: false        //是否装备了\r\n  }\r\n}\r\n\r\n//update equipment property\r\nexport function updateEquipment(equipment) {\r\n  const property = equipment.property;\r\n  util.each(property, (_property) => {\r\n    _property._intrinsic = (_property.intrinsic + _property.intrinsic * (equipment.strengthen * 0.01));\r\n  });\r\n  return equipment;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/res/equipment/methods.js","/*\r\n* 消耗类\r\n* */\r\nimport { getConfig } from './methods';\r\nimport util from '@util';\r\nimport Res from '../index';\r\n\r\n//消耗 继承 资源\r\nclass Consumable extends Res {\r\n  constructor(opts = {}) {\r\n    super(util.extend(getConfig(), opts));\r\n    init.call(this);\r\n  }\r\n}\r\n\r\nfunction init() {\r\n  this.$map(this, this.$options);\r\n  delete this.$options;\r\n}\r\n\r\nexport default Consumable;\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/res/consumable/index.js","/*\r\n* 消耗品方法\r\n* */\r\n\r\nexport function getConfig() {\r\n  return {\r\n    name: '',           //消耗品\r\n    description: '',    //消耗描述\r\n    type: 3,            //类型\r\n    hasUse:false,      //是否存在增益效果\r\n    property: {\r\n      hp: {\r\n        gain: 0,      //增益\r\n        effect: 0,     //效果\r\n        time: null,   //增益的有限时间\r\n        timer: null   //增益的定时器\r\n      },\r\n      mp: {\r\n        gain: 0,\r\n        effect: 0,\r\n        time: null,\r\n        timer: null\r\n      },\r\n      exp: {\r\n        gain: 0,\r\n        effect: 0,\r\n        time: null,\r\n        timer: null\r\n      },\r\n      physicalAttack: {\r\n        gain: 0,\r\n        time: null,\r\n        timer: null\r\n      },\r\n      physicalDefense: {\r\n        gain: 0,\r\n        time: null,\r\n        timer: null\r\n      },\r\n      magicAttack: {\r\n        gain: 0,\r\n        time: null,\r\n        timer: null\r\n      },\r\n      magicDefense: {\r\n        gain: 0,\r\n        time: null,\r\n        timer: null\r\n      }\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/res/consumable/methods.js","/*\r\n* 装备类\r\n* */\r\nimport { getConfig } from './methods';\r\nimport util from '@util';\r\nimport Res from '../index';\r\n\r\n//强化 继承 资源\r\nclass Strengthen extends Res {\r\n  constructor(opts = {}) {\r\n    super(util.extend(getConfig(), opts));\r\n    init.call(this);\r\n  }\r\n}\r\n\r\nfunction init() {\r\n  this.$map(this, this.$options);\r\n  delete this.$options;\r\n}\r\n\r\nexport default Strengthen;\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/res/strengthen/index.js","/*\r\n* 消耗品方法\r\n* */\r\n\r\nexport function getConfig() {\r\n  return {\r\n    strengthen: 99,     //强化要求提升等级\r\n    type: 4,            //类型\r\n    quantity: 5,        //强化所需数量\r\n    isStrengthen: true  //强化物品类型\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/engine/res/strengthen/methods.js"],"sourceRoot":""}